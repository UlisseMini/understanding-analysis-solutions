\section{Uniform Convergence and Differentiation}

\begin{exercise}
  Consider the sequence of functions defined by
  $$
  g_{n}(x)=\frac{x^{n}}{n} .
  $$
  \enum {
  \item Show $\left(g_{n}\right)$ converges uniformly on $[0,1]$ and find $g=\lim g_{n}$. Show that $g$ is differentiable and compute $g^{\prime}(x)$ for all $x \in[0,1]$.
  \item Now, show that $\left(g_{n}^{\prime}\right)$ converges on $[0,1]$. Is the convergence uniform? Set $h=\lim g_{n}^{\prime}$ and compare $h$ and $g^{\prime}$. Are they the same?
  }
\end{exercise}
\begin{solution}
\enum{
    \item I claim that \((g_n) \to 0\). This can be seen by noting that for \(x \in [0,1]\), \(0 \leq x^n \leq 1\) and so \(0 \leq g_n(x) \leq 1/n\). Thus for any \(\epsilon > 0\), any \(n > N = 1/\epsilon\) will force \(|g_n(x) - 0| < \epsilon\). \(g(x)=0\) is obviously differentiable, with its derivative just \(0\).
    \item \(g'(n) = x^{n-1}\). Using a similar argument,
\[h(x) = \lim_{n\to\infty} g'_n(x) = \begin{cases}
    0 & x \in [0,1) \\
    1 & x = 1
\end{cases}\]
which is not equal to \(g'(x)\) at \(1\). Tne convergence is not uniform. For \(\epsilon = 0.5\) and any given \(n\), choosing \(1 > x > \sqrt[N]{\epsilon}\) leads to \(g_n(x) > \epsilon\), preventing uniform convergence.
}
\end{solution}
\begin{exercise}
  Consider the sequence of functions
  $$
  h_{n}(x)=\sqrt{x^{2}+\frac{1}{n}}.
  $$
  \enum {
  \item Compute the pointwise limit of $\left(h_{n}\right)$ and then prove that the convergence is uniform on $\mathbf{R}$.
  \item Note that each $h_{n}$ is differentiable. Show $g(x)=\lim h_{n}^{\prime}(x)$ exists for all $x$, and explain how we can be certain that the convergence is not uniform on any neighborhood of zero.
  }
\end{exercise}
\begin{solution}
\enum{
    \item As \(n \to \infty\), \(h_n(x) \to \sqrt{x^2} = |x|\). Now, recall that \(\sqrt{a} + \sqrt{b} \geq \sqrt{a + b}\) (I think this has been proved earlier, but if not, this is easily shown by squaring both sides); alternatively \(\sqrt{a + b} - \sqrt{a} \leq \sqrt{b}\), and so
    \[\abs{\sqrt{\left(x^2 + \frac{1}{n}\right)} - \sqrt{x^2}} \leq \sqrt{\frac{1}{n}} = \frac{1}{\sqrt{n}}\]
    which we can clearly make less than any \(\epsilon > 0\).

    \item \[h'_n(x) = \frac{x}{\sqrt{x^2 + 1/n}}\] which converges to
\[g(x) = \begin{cases}
 1 & x > 0 \\
 0 & x = 0 \\
 -1 & x < 0
\end{cases}\]
    Define \(h(x)\) to be the pointwise limit of \((h_n)\). If the convergence to \(g\) was uniform, that would imply that \(g_n = h'(x)\) (by the Differentiable Limit Theorem). But from part (a) \(h\) is not differentiable at 0, therefore the convergence to \(g\) cannot be uniform in a neighborhood around 0.
}
\end{solution}
\begin{exercise}
  Consider the sequence of functions
  $$
  f_{n}(x)=\frac{x}{1+n x^{2}} .
  $$
  \enum{
  \item Find the points on $\mathbf{R}$ where each $f_{n}(x)$ attains its maximum and minimum value. Use this to prove $\left(f_{n}\right)$ converges uniformly on $\mathbf{R}$. What is the limit function?
  \item Let $f=\lim f_{n}$. Compute $f_{n}^{\prime}(x)$ and find all the values of $x$ for which $f^{\prime}(x)=\lim f_{n}^{\prime}(x) .$
  }
\end{exercise}
\begin{solution}
\enum{
    \item \(f_n\) is differentiable on \(\mathbf{R}\), so by the Interior Extremum Theorem the maximum and minimum values will appear where \(f'_n(x) = 0\). We have
    \[f'_n(x) = \frac{1-nx^2}{\left(1 + nx^2\right)^2}\]
    which is zero at \(x = \pm 1/\sqrt{n}\). Plugging these values back into \(f_n(x)\) we get that \(\abs{f_n(x)} \leq \frac{1}{2\sqrt{n}}\). Clearly this forces \(f_n\) to converge uniformly to 0.
    \item \(f(x) = f'(x) = 0\). We have
    \[\lim_{n \to \infty} f'_n(x) = \frac{1 - nx^2}{1 + 2nx^2 + n^2 x^4} = \frac{\frac{1}{n} - x^2}{\frac{1}{n} + 2x^2 + nx^4} = 0\]
    and therefore \(f'(x) = \lim f'_n(x)\) everywhere.
}
\end{solution}
\begin{exercise}
  Let
  $$
  h_{n}(x)=\frac{\sin (n x)}{\sqrt{n}} .
  $$
  Show that $h_{n} \rightarrow 0$ uniformly on $\mathbf{R}$ but that the sequence of derivatives $\left(h_{n}^{\prime}\right)$ diverges for every $x \in \mathbf{R}$.
\end{exercise}
\begin{solution}
\(|sin(x)| \leq 1\) and so \(\abs{h_n(x)} < \frac{1}{\sqrt{n}}\) which shows that \(h_n \to 0\) uniformly on \(\mathbf{R}\). \(h'_n(x) = \frac{n\cos(nx)}{\sqrt{n}} = \sqrt{n} \cos(nx)\). Intuitively this diverges because of the unbounded \(\sqrt{n}\) factor, but to prove it formally requires some thought. We want to show that for any fixed real numbers \(x\) and \(M\) we can find some \(n\) where \(h'_n(x) \geq M\) (this will show that \(h'_n(x)\) is unbounded and thus diverges). First let \(N_1 > 4M^2\), then we just need to find some \(n \geq N_1\) so that \(\abs{nx - Z\pi} \leq \pi/3\) for some integer \(Z\); this would cause \(\abs{\cos(nx)} \geq 1/2\) and thus \(h'_n(x) \geq M\).

Express \(N_1 x = 2 \pi P + k\) where \(P\) is some integer and \(0 \leq k < 2 \pi\). (This next bit is reminiscent of arithmetic modulo \(2\pi\).) Now if \(k \in [0, \pi/3]\) or \([2\pi/3, 4\pi/3]\) or \([5\pi/3, 2\pi]\) we're done. Otherwise \(k \in (\pi/3, 2\pi/3)\) or \((4\pi/3, 5\pi/3)\); so consider \(2N_1 x = 4 \pi P + 2k\), with \(2k \in (2\pi/3, 4 \pi/3)\) or \((8\pi/3, 10\pi/3)\); both of these cases will have \(2N_1 x\) within \(\pi/3\) of a multiple of \(\pi\), hence \(h'_n(x)\) diverges for all \(x\).
\end{solution}
\begin{exercise}
  Let
  $$
  g_{n}(x)=\frac{n x+x^{2}}{2 n}
  $$
  and set $g(x)=\lim g_{n}(x)$. Show that $g$ is differentiable in two ways:
  \enum {
  \item Compute $g(x)$ by algebraically taking the limit as $n \rightarrow \infty$ and then find $g^{\prime}(x)$.
  \item Compute $g_{n}^{\prime}(x)$ for each $n \in \mathbf{N}$ and show that the sequence of derivatives $\left(g_{n}^{\prime}\right)$ converges uniformly on every interval $[-M, M]$. Use Theorem 6.3.3 to conclude $g^{\prime}(x)=\lim g_{n}^{\prime}(x)$.
  \item Repeat parts (a) and (b) for the sequence $f_{n}(x)=\left(n x^{2}+1\right) /(2 n+x)$.

  }
\end{exercise}
\begin{solution}
\enum{
    \item By inspection \(g(x) = x/2\) and \(g'(x) = 1/2\).
    \item \(g'_n(x) = 1/2 + \frac{x}{n}\) which approaches \(\frac{1}{2}\) as \(n \to \infty\). Now \(\abs{g'_n - \frac{1}{2}} = \abs{\frac{x}{n}}\) is bounded by \(\frac{M}{n}\) which goes to 0 and is not dependent on \(x\), and therefore \((g'_n)\) converges uniformly over \([-M, M]\).
    \item \(f(x) = x^2 / 2\), and \(f'(x) = x\). We have
        \[f'_n(x) = \frac{4n^2x + nx^2 - 1}{4n^2 + 4nx + x^2} \]
        which approaches \(x\) as \(n \to \infty\). With some algebra we have
        \[\abs{f'_n(x) - x} = \abs{ \frac{x^3 - 3nx^2 - 1}{4n^2 + 4nx + x^2} } \leq \frac{M^3 + 3nM^2 + 1}{4n^2 - 4Mn}\]
        which approaches 0 as \(n \to \infty\) independent of \(x\), and therefore \((f'_n)\) converges uniformly over \([-M, M]\).
}

\end{solution}
\begin{exercise}
  Provide an example or explain why the request is impossible. Let's take the domain of the functions to be all of $\mathbf{R}$.
  \enum {
  \item A sequence $\left(f_{n}\right)$ of nowhere differentiable functions with $f_{n} \rightarrow f$ uniformly and $f$ everywhere differentiable.
  \item A sequence $\left(f_{n}\right)$ of differentiable functions such that $\left(f_{n}^{\prime}\right)$ converges uniformly but the original sequence $\left(f_{n}\right)$ does not converge for any $x \in \mathbf{R}$.
  \item A sequence $\left(f_{n}\right)$ of differentiable functions such that both $\left(f_{n}\right)$ and $\left(f_{n}^{\prime}\right)$ converge uniformly but $f=\lim f_{n}$ is not differentiable at some point.
  }
\end{exercise}
\begin{solution}
\enum{
    \item Let \(g(x)\) be the continuous but nowhere-differentiable function defined in section 5.4. Then since \(g(x)\) is bounded, \(f_n(x) = g(x) / n\) clearly conerges uniformly to 0, and is thus such a sequence.
    \item Let
    \[f_n(x) = \begin{cases}
       1 & \text{  n is odd} \\
       0 & \text{  n is even} \\
    \end{cases}\]
    Clearly \(f_n\) does not converge anyewhere, but \(f'_n(x)\) converges to 0.

    \item Not possible - since \(f_n\) converges uniformly, it must converge at at least one point, and since \(f'_n'\) converges uniformly, we can apply Theorem 6.3.3 to show that \(f\) is differentiable everywhere.
}
\end{solution}
\begin{exercise}
  Use the Mean Value Theorem to supply a proof for Theorem 6.3.2. To get started, observe that the triangle inequality implies that, for any $x \in[a, b]$ and $m, n \in \mathbf{N}$,
  $$
  \left|f_{n}(x)-f_{m}(x)\right| \leq\left|\left(f_{n}(x)-f_{m}(x)\right)-\left(f_{n}\left(x_{0}\right)-f_{m}\left(x_{0}\right)\right)\right|+\left|f_{n}\left(x_{0}\right)-f_{m}\left(x_{0}\right)\right| .
  $$
\end{exercise}
\begin{solution}
  \TODO
\end{solution}
