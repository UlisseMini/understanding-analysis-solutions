\section{The Intermediate Value Theorem}

\begin{exercise}
  Show how the Intermediate Value Theorem follows as a corollary to preservation of connected sets (Theorem 4.5.2).
\end{exercise}
\begin{solution}
  Let $f$ be a continuous function defined over $[a,b]$. And let $L$ be a real number such that $f(a) < L < f(b)$.

  Define $A = \{x \in [a,b] : f(x) \le L\}$ and $B = \{x \in [a,b] : f(x) > L\}$. $A,B$ are clearly disjoint, they are also nonempty since $a \in A$ and $b \in B$. Since $[a,b]$ is connected there exists a sequence in $A$ or $B$ with limit in the other. Let $(x_n)$ be such a sequence, I claim $(x_n) \to x$ with $f(x) = L$.

  $(x_n)$ cannot be contained in $A$ since $f(x_n) \le L$ implies $f(x) \le L$ and $x \in A$ ($A$ is closed)

  If $(x_n)$ is contained in $B$ then $f(x_n) > L$ implies $f(x) \ge L$ by the Order Limit Theorem. But since $x \in A$ we have $f(x) \le A$ as well. Thus $f(x) = L$ completing the proof.

  Alternative proof which takes advantage of how connected sets in \(\mathbf{R}\) are intervals: Since \([a, b]\) is connected, so too must be \(f([a, b])\), which must be an interval containing both \(f(a)\) and \(f(b)\); therefore \([f(a), f(b)]\) (or \([f(b), f(a)]\) if \(f(b) < f(a)\)) is a subset of \(f([a, b])\), completing the proof.

\end{solution}

\begin{exercise}
  Provide an example of each of the following, or explain why the request is impossible
  \enum{
  \item A continuous function defined on an open interval with range equal to a closed interval.
  \item A continuous function defined on a closed interval with range equal to an open interval.
  \item A continuous function defined on an open interval with range equal to an unbounded closed set different from $\mathbf{R}$.
  \item A continuous function defined on all of $\mathbf{R}$ with range equal to $\mathbf{Q}$.
  }
\end{exercise}
\begin{solution}
  \enum{
  \item Possible, see Exercise 4.4.8 (b)
  \item Impossible by preservation of compact sets
  \item Let $f : (0,1) \to [2, \infty)$ be defined by
    $$
    f(x) = \begin{cases}
      \frac 1x &\text{ if } x \in (0, 1/2] \\
      \frac{1}{1-x} &\text{ if } x \in (1/2, 1)
    \end{cases}
    $$
    This works since $[2,\infty)$ is closed, unbounded and different from $\mathbf{R}$.
  \item Impossible as this contradicts the intermediate value theorem.
  }
\end{solution}

\begin{exercise}
  A function $f$ is increasing on $A$ if $f(x) \leq f(y)$ for all $x<y$ in $A$. Show that if $f$ is increasing on $[a, b]$ and satisfies the intermediate value property (Definition 4.5.3), then $f$ is continuous on $[a, b]$.
\end{exercise}
\begin{solution}
  Let $x \in [a,b]$ and choose $\epsilon > 0$.
  Let $L \in (f(a), f(x)) \cap (f(x)-\epsilon, f(x))$ IVP lets us find $c \in (a, x)$ with $f(c)= L$, thus $|f(x) - f(c)| < \epsilon$.
  Likewise we can find $d \in (x,b)$ with $|f(d)-f(x)|<\epsilon$.
  Because $f$ is increasing $f(x)-f(c) < \epsilon$ implies $f(x)-f(c')<\epsilon$ for $c' \in (c, x)$ (and likewise for $d$) meaning every $y \in (c, d)$ has $|f(x)-f(y)|<\epsilon$. To get a $\delta$-neighborhood simply set $\delta = \min\{x-c, d-x\}$.
\end{solution}

\begin{exercise}
  Let $g$ be continuous on an interval $A$ and let $F$ be the set of points where $g$ fails to be one-to-one; that is,
  $$
  F=\{x \in A: f(x)=f(y) \text { for some } y \neq x \text { and } y \in A\} \text {. }
  $$
  Show $F$ is either empty or uncountable.
\end{exercise}
\begin{solution}
  % TODO: Cleanup
  Suppose $F$ is nonempty, let $x,y \in A$ with $x \ne y$ and $f(x) = f(y)$. Pick $z \in (x,y)$ such that $f(z) \ne f(x)$ (if $z$ does not exist $f$ is constant over $(x,y)$ and we are finished early). By the Intermediate Value Theorem every $L \in (f(x), f(z))$ has an $x' \in (x, z)$ with $f(x') = L$. And since $L \in (f(z), f(y))$ as well we can find $y' \in (z,y)$ with $f(y') = L$, thus $f(y') = f(x')$ and so $f$ is not 1-1 at every $L \in (f(x), f(z))$ which is uncountable.
\end{solution}

\begin{exercise}
  \enum{
  \item Finish the proof of the Intermediate Value Theorem using the Axiom of Completeness started previously.
  \item Finish the proof of the Intermediate Value Theorem using the Nested Interval Property started previously.
  }
\end{exercise}
\begin{solution}
  Let $f$ be continuous, and let $L \in (f(a), f(b))$, we must find $c \in (a,b)$ with $f(c) = L$. (If \(f(a) > f(b)\) then instead consider \(f'(x) = -f(x)\) and \(L' = -L\))

  \enum{
  \item Let $c = \sup \{x : f(x) \le L\}$. $f(c) < L$ is not possible since we could find $\delta$ small enough that $f(c+\delta) < L$ contradicting $c$ being an upper bound. And $f(c) > L$ is impossible since we could find $\delta$ small enough that $f(c-\delta) > L$ contradicting $c$ being the least upper bound (since we found a smaller upper bound). Thus we must have $f(c) = L$ completing the proof.

    A detail we glossed over is $c \in (a,b)$, which can be seen since $f(b) > L$ and $f(a) < L$ has $f(a+\delta) < L$ meaning $a$ cannot be the least upper bound.
  \item Let $I_0 = [a,b]$ and bisect into two intervals, let $I_1$ be the interval where $L$ is still between $f$ at the endpoints.
    Continue like this to get a sequence $I_n \subseteq I_{n-1}$, $I_n \ne \emptyset$, and let $c \in \bigcap_{n=1}^\infty I_n$.

 Suppose for contradiction that \(f(c) < L\); then there must be some \(\epsilon > 0\) so that \(V_\epsilon(f(c)) < L\). Since \(f\) is continuous, there must also be some \(\delta\) so that \(f(V_\delta(c)) < L\) - but this contradicts our construction in that one endpoint of \(I_n\) is mapped to a number greater than \(L\), no matter how large \(n\) gets and how small \(I_n\) is as a result. A similar argument shows \(f(c)\) cannot be larger than \(L\), and therefore \(f(c) = L\).
  }
\end{solution}

\begin{exercise}
  Let $f:[0,1] \rightarrow \mathbf{R}$ be continuous with $f(0)=f(1)$
  \enum{
  \item Show that there must exist $x, y \in[0,1]$ satisfying $|x-y|=1 / 2$ and $f(x)=f(y) .$
  \item Show that for each $n \in \mathbf{N}$ there exist $x_{n}, y_{n} \in[0,1]$ with $\left|x_{n}-y_{n}\right|=1 / n$ and $f\left(x_{n}\right)=f\left(y_{n}\right)$.
  \item If $h \in(0,1 / 2)$ is not of the form $1 / n$, there does not necessarily exist $|x-y|=h$ satisfying $f(x)=f(y)$. Provide an example that illustrates this using $h=2 / 5$.
  }
\end{exercise}
\begin{solution}
  \TODO
\end{solution}

\begin{exercise}
  Let $f$ be a continuous function on the closed interval $[0,1]$ with range also contained in $[0,1]$. Prove that $f$ must have a fixed point; that is, show $f(x)=x$ for at least one value of $x \in[0,1]$.
\end{exercise}
\begin{solution}
  \TODO
\end{solution}

\begin{exercise}[Inverse functions]
  If a function $f: A \rightarrow \mathbf{R}$ is one-to-one, then we can define the inverse function $f^{-1}$ on the range of $f$ in the natural way: $f^{-1}(y)=x$ where $y=f(x)$.

  Show that if $f$ is continuous on an interval $[a, b]$ and one-to-one, then $f^{-1}$ is also continuous.
\end{exercise}
\begin{solution}
  \TODO
\end{solution}
